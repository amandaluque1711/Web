<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>üêæ Adivina el Animal üêæ</title>

<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@800&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    padding:20px;
    font-family:'Baloo 2', cursive;
    background: linear-gradient(135deg,#ffde7d,#ff7a7a);
    text-align:center;
    overflow:hidden;
}

h1{
    color:#fff;
    font-size:3em;
    text-shadow:3px 3px #ff4d6d;
}

#score{
    font-size:1.7em;
    color:#fff;
}

.game{
    display:flex;
    justify-content:center;
    align-items:center;
    gap:90px;
    margin-top:40px;
}

.panel{
    width:240px;
    height:240px;
    background:white;
    border-radius:30px;
    border:6px dashed #ffd166;
    display:flex;
    align-items:center;
    justify-content:center;
}

.options{
    display:flex;
    gap:25px;
}

.option{
    width:160px;
    height:240px;
    background:white;
    border-radius:25px;
    cursor:pointer;
    border:5px solid transparent;
    transition:0.3s;
}

.option:hover{
    transform:scale(1.1);
    border-color:#06d6a0;
}

#feedback{
    font-size:5em;
    height:80px;
}

#animalName{
    font-size:2.2em;
    color:#fff;
}

canvas{
    position:absolute;
    top:0;
    left:0;
    pointer-events:none;
}
</style>
</head>

<body>

<h1>üêæ Adivina el Animal üêæ</h1>
<div id="score">‚≠ê Puntos: 0</div>

<div class="game">
    <div class="panel" id="left"></div>
    <div class="options" id="options"></div>
</div>

<div id="feedback"></div>
<div id="animalName"></div>

<canvas id="canvas"></canvas>

<script>
// ================== VOZ ==================
function hablar(texto){
    const voz = new SpeechSynthesisUtterance(texto);
    voz.lang = "es-ES";
    voz.rate = 0.9;
    speechSynthesis.speak(voz);
}

// ================== ANIMALES SVG ==================
const animales = [
{
    nombre:"perro",
    izquierda:`
    <svg width="220" height="220">
        <rect x="0" y="0" width="110" height="220" fill="#cdb4db"/>
        <circle cx="90" cy="90" r="45" fill="#ffc8dd"/>
        <circle cx="75" cy="80" r="6"/>
        <rect x="60" y="130" width="40" height="50" rx="20" fill="#ffc8dd"/>
    </svg>`,
    derecha:`
    <svg width="220" height="220">
        <rect x="110" y="0" width="110" height="220" fill="#cdb4db"/>
        <circle cx="125" cy="80" r="6"/>
        <rect x="110" y="110" width="70" height="40" rx="20" fill="#ffc8dd"/>
    </svg>`
},
{
    nombre:"gato",
    izquierda:`
    <svg width="220" height="220">
        <rect x="0" y="0" width="110" height="220" fill="#bde0fe"/>
        <polygon points="30,20 60,60 20,60" fill="#a2d2ff"/>
        <circle cx="85" cy="95" r="40" fill="#a2d2ff"/>
        <circle cx="70" cy="85" r="6"/>
    </svg>`,
    derecha:`
    <svg width="220" height="220">
        <rect x="110" y="0" width="110" height="220" fill="#bde0fe"/>
        <circle cx="125" cy="85" r="6"/>
        <path d="M125 115 Q135 125 145 115" stroke="#000" stroke-width="4" fill="none"/>
    </svg>`
},
{
    nombre:"le√≥n",
    izquierda:`
    <svg width="220" height="220">
        <rect x="0" y="0" width="110" height="220" fill="#ffd166"/>
        <circle cx="85" cy="95" r="50" fill="#f4a261"/>
        <circle cx="70" cy="85" r="6"/>
    </svg>`,
    derecha:`
    <svg width="220" height="220">
        <rect x="110" y="0" width="110" height="220" fill="#ffd166"/>
        <circle cx="125" cy="85" r="6"/>
        <rect x="110" y="120" width="70" height="30" rx="15" fill="#e76f51"/>
    </svg>`
}
];

// ================== L√ìGICA ==================
let indice = 0;
let puntos = 0;

const left = document.getElementById("left");
const options = document.getElementById("options");
const feedback = document.getElementById("feedback");
const animalName = document.getElementById("animalName");
const score = document.getElementById("score");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

function cargar(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    feedback.textContent="";
    animalName.textContent="";

    left.innerHTML = animales[indice].izquierda;
    options.innerHTML="";

    let opciones = animales.map(a=>a.derecha).sort(()=>Math.random()-0.5).slice(0,2);
    opciones.push(animales[indice].derecha);
    opciones.sort(()=>Math.random()-0.5);

    opciones.forEach(svg=>{
        const div = document.createElement("div");
        div.className="option";
        div.innerHTML = svg;
        div.onclick = ()=>comprobar(svg,div);
        options.appendChild(div);
    });
}

function comprobar(svg,div){
    if(svg === animales[indice].derecha){
        dibujarLinea(left,div,"green");
        feedback.textContent="üëç";
        animalName.textContent="¬°Es un " + animales[indice].nombre + "!";
        hablar("¬°Es un " + animales[indice].nombre + "!");
        puntos++;
        score.textContent="‚≠ê Puntos: " + puntos;

        setTimeout(()=>{
            indice = (indice+1)%animales.length;
            cargar();
        },1600);
    }else{
        dibujarLinea(left,div,"red");
        feedback.textContent="‚ùå";
        hablar("Int√©ntalo otra vez");
        setTimeout(()=>{
            feedback.textContent="";
            ctx.clearRect(0,0,canvas.width,canvas.height);
        },900);
    }
}

function dibujarLinea(a,b,color){
    const r1 = a.getBoundingClientRect();
    const r2 = b.getBoundingClientRect();
    ctx.strokeStyle=color;
    ctx.lineWidth=6;
    ctx.beginPath();
    ctx.moveTo(r1.right, r1.top + r1.height/2);
    ctx.lineTo(r2.left, r2.top + r2.height/2);
    ctx.stroke();
}

cargar();
</script>

</body>
</html>
